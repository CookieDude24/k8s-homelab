apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: cloudflare-api-key
  namespace: cert-manager
spec:
  encryptedData:
    api-key: AgCWJtZLQ95jXUBetpwEty4IHWqo2oIXUg1EneNW+1pERytKNjkCYyChJ/IfdqnZBVUMYWsYyO3s69m09Mzb6TdpXd3FYsZ4Ufk0Xfjl+TcwnFBbj+gpsT9D4V85qRaPI8gZe+aTZAopKuSo94OS3d4RlD+YdAoht55WJx+41WXNQ1s8FSodnb9brTmS0E55cq1kXzKZ85MnuafWCb2+cg9zoO+vlutd8LkjZY3c5jSxzV61mFD93sUpbAa2PSFhtzVl6ruSagNRKWtYonPCHNptDp8c9EhwKSZbmN+pqOKExmJyJMIVO4iQgdzw5wImur5XzcPXNtZd8UIa6xP58bxHHK+nIzxc55lD68lr2FTmW2pgVUXfNkSlqq6CdS1eWOXPLXozKqoM+6ThPIxOD4iEczWK9IcK43YzqF0GwCcIiR5/JBFH6onRHzYmSZS7KGZKbruPVnakX0iOAnV7uoekQ+rlb3OrXCh2A3i8q1rcXC2ZClHkQPcPv4+u23g9Xqj4PgARCKutHzXTUo7+npNtUBE8g8tNrsfQZ6Idm1dqDl33TNL0iK/WZSb+FYAmVWSH18qBOfPIfOtIDMLR7cDXhwtH+G3pMg+ckKyrZKk3SV2GM7853HYxlNhaebJC60bU/7VRX4zlJ1rpY4cjm3OrSYT6OicFX/3qcUdRRUqn/mi3ITUsl3nu5069rRihZcCIPKba9Qz+3E3H56h0HZW5MDamRaokQsOMhdl9dLLct7UVHXtKnCT5
  template:
    metadata:
      creationTimestamp: null
      name: cloudflare-api-key
      namespace: cert-manager
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    email:
    privateKeySecretRef:
      name: letsencrypt-production
    server: https://acme-v02.api.letsencrypt.org/directory
    solvers:
      - dns01:
          cloudflare:
            apiTokenSecretRef:
              key: api-key
              name: cloudflare-api-key
            email: maxidorninger@gmail.com
        selector:
          dnsZones: ["007337.xyz"]
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    email:
    privateKeySecretRef:
      name: letsencrypt-staging
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    solvers:
      - dns01:
          cloudflare:
            apiTokenSecretRef:
              key: api-key
              name: cloudflare-api-key
            email: maxidorninger@gmail.com
        selector:
          dnsZones: ["007337.xyz"]